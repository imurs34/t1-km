{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/t1_km/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/t1_km/pages/index.jsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport _ from \"lodash\";\nimport Head from \"next/head\";\nimport React from \"react\";\nimport shortid from \"shortid\";\nimport styled, { css } from \"styled-components\";\nimport { createBreakpoint } from \"react-use\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef, useState } from \"react\";\nimport Content from \"../components/Content\";\nimport Controller from \"../components/Controller\";\nimport Video from \"../components/Video\";\nimport input from \"../input1.json\";\nimport { darkModeAtom, durationAtom, frameHeightAtom, mobileModeAtom, withVideoAtom } from \"../atom\";\n\nvar ControllerLine = function ControllerLine(_ref) {\n  _s();\n\n  var content = _ref.content;\n\n  var _useAtom = useAtom(durationAtom),\n      _useAtom2 = _slicedToArray(_useAtom, 1),\n      duration = _useAtom2[0];\n\n  var startTimes = _.map(content, \"end_time\");\n\n  if (!duration) {\n    return /*#__PURE__*/_jsxDEV(Loading, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 17\n      }, _this)\n    }, shortid.generate(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }, _this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Line, {\n    children: startTimes.map(function (time) {\n      return /*#__PURE__*/_jsxDEV(LinePoint, {\n        value: time / duration * 100,\n        children: /*#__PURE__*/_jsxDEV(Circle, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 25\n        }, _this)\n      }, shortid.generate(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 21\n      }, _this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(ControllerLine, \"HSWabeBiC1RJYEcKJcACcdenMsM=\", false, function () {\n  return [useAtom];\n});\n\n_c = ControllerLine;\nvar Loading = styled.div.withConfig({\n  displayName: \"pages__Loading\",\n  componentId: \"zhw0iv-0\"\n})([\"> p{color:white;}z-index:200;background-color:black;position:fixed;min-width:100%;min-height:100%;display:\", \";flex:1;align-items:center;justify-content:center;\"], function (props) {\n  return props.isLoading ? \"flex\" : \"none\";\n});\n_c2 = Loading;\nvar Circle = styled.div.withConfig({\n  displayName: \"pages__Circle\",\n  componentId: \"zhw0iv-1\"\n})([\"width:10px;height:10px;position:absolute;left:100%;z-index:999;background-color:gray;\"]);\n_c3 = Circle;\nvar LinePoint = styled.div.withConfig({\n  displayName: \"pages__LinePoint\",\n  componentId: \"zhw0iv-2\"\n})([\"position:absolute;top:0;left:0;margin-top:5px;width:\", \"%;height:10px;\"], function (props) {\n  return props.value;\n});\n_c4 = LinePoint;\nvar Line = styled.div.withConfig({\n  displayName: \"pages__Line\",\n  componentId: \"zhw0iv-3\"\n})([\"margin-top:5px;pointer-events:none;display:flex;width:100%;height:20px;position:absolute;z-index:200;overflow:hidden;top:0;> div:last-child{visibility:hidden;}\"]);\n_c5 = Line;\n\nvar modeSelector = function modeSelector(_ref2) {\n  var mobile = _ref2.mobile,\n      dark = _ref2.dark;\n\n  if (mobile === false && dark === false) {\n    return \"original\";\n  }\n\n  if (mobile === false && dark === true) {\n    return \"original_dark\";\n  }\n\n  if (mobile === true && dark === false) {\n    return \"restructure\";\n  }\n\n  if (mobile === true && dark === true) {\n    return \"restructure_dark\";\n  }\n};\n\nvar imageSelector = function imageSelector(_ref3) {\n  var location = _ref3.location,\n      dark = _ref3.dark;\n\n  if (location === \"top\" & dark === false) {\n    return \"top_img\";\n  }\n\n  if (location === \"top\" & dark === true) {\n    return \"top_img_dark\";\n  }\n\n  if (location === \"bottom\" & dark === false) {\n    return \"bottom_img\";\n  }\n\n  if (location === \"bottom\" & dark === true) {\n    return \"bottom_img_dark\";\n  }\n};\n\nvar Main = function Main() {\n  _s2();\n\n  var _useAtom3 = useAtom(darkModeAtom),\n      _useAtom4 = _slicedToArray(_useAtom3, 1),\n      dark = _useAtom4[0];\n\n  var _useAtom5 = useAtom(mobileModeAtom),\n      _useAtom6 = _slicedToArray(_useAtom5, 1),\n      mobile = _useAtom6[0];\n\n  var _useAtom7 = useAtom(frameHeightAtom),\n      _useAtom8 = _slicedToArray(_useAtom7, 2),\n      height = _useAtom8[0],\n      setHeight = _useAtom8[1];\n\n  var _useState = useState(input.content.original),\n      content = _useState[0],\n      setContent = _useState[1];\n\n  useEffect(function () {\n    reset();\n    setContent(input.content[modeSelector({\n      mobile: mobile,\n      dark: dark\n    })]);\n  }, [dark, mobile]);\n  useEffect(function () {\n    setHeight(input.template.height);\n  }, []);\n\n  var _useAtom9 = useAtom(durationAtom),\n      _useAtom10 = _slicedToArray(_useAtom9, 1),\n      duration = _useAtom10[0];\n\n  var _useState2 = useState(shortid.generate()),\n      key = _useState2[0],\n      setKey = _useState2[1];\n\n  var reset = function reset() {\n    setKey(function () {\n      return shortid.generate();\n    });\n    videoComponentRef.current.move();\n  };\n\n  var _useAtom11 = useAtom(withVideoAtom),\n      _useAtom12 = _slicedToArray(_useAtom11, 1),\n      withVideo = _useAtom12[0];\n\n  var videoComponentRef = useRef();\n\n  var togglePlay = function togglePlay() {\n    videoComponentRef.current.toggle();\n  };\n\n  var jump = function jump(percentPoint) {\n    videoComponentRef.current.jump(percentPoint);\n  };\n\n  var videoSource = input.sourcePath + input.video.source;\n  var frameInfo = {\n    sourcePath: input.sourcePath,\n    topBg: input.template[imageSelector({\n      location: \"top\",\n      dark: dark\n    })],\n    bottomBg: input.template[imageSelector({\n      location: \"bottom\",\n      dark: dark\n    })],\n    topHeight: input.template.top_padding / input.template.height * 100,\n    bottomHeight: input.template.bottom_padding / input.template.height * 100\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"preconnect\",\n        href: \"https://fonts.googleapis.com\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"preconnect\",\n        href: \"https://fonts.gstatic.com\",\n        crossorigin: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, _this), input.template.fontUrl.map(function (url) {\n        return /*#__PURE__*/_jsxDEV(\"link\", {\n          href: url,\n          rel: \"stylesheet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 28\n        }, _this);\n      }), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"apple-mobile-web-app-capable\",\n        content: \"yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"apple-mobile-web-app-status-bar-style\",\n        content: \"black-translucent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"viewport\",\n        content: \"viewport-fit=cover, user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"node\",\n      children: [/*#__PURE__*/_jsxDEV(Loading, {\n        isLoading: !duration,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"loading..\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(InnerContainer, {\n        isFull: !withVideo,\n        children: [/*#__PURE__*/_jsxDEV(InnerContent, {\n          children: content.map(function (data, index) {\n            return /*#__PURE__*/_jsxDEV(Content, {\n              data: data,\n              index: index,\n              sourcePath: input.sourcePath,\n              frameInfo: frameInfo,\n              isFull: !withVideo,\n              template: input.template\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 36\n            }, _this);\n          })\n        }, key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Video, {\n          src: videoSource,\n          content: content,\n          ref: videoComponentRef,\n          videoLocation: input.video.control\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(ControllerContainer, {\n        children: [/*#__PURE__*/_jsxDEV(Controller, {\n          reset: reset,\n          togglePlay: togglePlay,\n          jump: jump\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(ControllerLine, {\n          content: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true);\n};\n\n_s2(Main, \"WlegH2fMzuvpHvoCRyapXwW6TKE=\", false, function () {\n  return [useAtom, useAtom, useAtom, useAtom, useAtom];\n});\n\n_c6 = Main;\nvar ControllerContainer = styled.div.withConfig({\n  displayName: \"pages__ControllerContainer\",\n  componentId: \"zhw0iv-4\"\n})([\"width:100%;position:relative;background-color:black;\"]);\n_c7 = ControllerContainer;\nvar InnerContainer = styled.div.attrs({\n  className: \"frame\"\n}).withConfig({\n  displayName: \"pages__InnerContainer\",\n  componentId: \"zhw0iv-5\"\n})([\"flex:1;display:flex;align-items:stretch;padding-right:100px;position:relative;\", \";\"], function (props) {\n  return props.isFull && css([\"padding-right:0;\"]);\n});\n_c8 = InnerContainer;\nvar Container = styled.div.withConfig({\n  displayName: \"pages__Container\",\n  componentId: \"zhw0iv-6\"\n})([\"display:flex;flex-direction:column;height:100vh;max-height:100vh;width:100vw;max-width:100vw;overflow:hidden;box-sizing:border-box;align-items:stretch;position:relative;background-color:\", \";@supports (-webkit-touch-callout:none){height:-webkit-fill-available;}\"], function (props) {\n  return props.isDark ? \"rgb(47, 48, 49)\" : \"white\";\n});\n_c9 = Container;\nvar InnerContent = styled.div.withConfig({\n  displayName: \"pages__InnerContent\",\n  componentId: \"zhw0iv-7\"\n})([\"flex:1;display:flex;align-items:stretch;padding-right:100px;position:relative;\"]);\n_c10 = InnerContent;\nexport default Main;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"ControllerLine\");\n$RefreshReg$(_c2, \"Loading\");\n$RefreshReg$(_c3, \"Circle\");\n$RefreshReg$(_c4, \"LinePoint\");\n$RefreshReg$(_c5, \"Line\");\n$RefreshReg$(_c6, \"Main\");\n$RefreshReg$(_c7, \"ControllerContainer\");\n$RefreshReg$(_c8, \"InnerContainer\");\n$RefreshReg$(_c9, \"Container\");\n$RefreshReg$(_c10, \"InnerContent\");","map":{"version":3,"sources":["/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/t1_km/pages/index.jsx"],"names":["_","Head","React","shortid","styled","css","createBreakpoint","useAtom","useEffect","useRef","useState","Content","Controller","Video","input","darkModeAtom","durationAtom","frameHeightAtom","mobileModeAtom","withVideoAtom","ControllerLine","content","duration","startTimes","map","generate","time","Loading","div","props","isLoading","Circle","LinePoint","value","Line","modeSelector","mobile","dark","imageSelector","location","Main","height","setHeight","original","setContent","reset","template","key","setKey","videoComponentRef","current","move","withVideo","togglePlay","toggle","jump","percentPoint","videoSource","sourcePath","video","source","frameInfo","topBg","bottomBg","topHeight","top_padding","bottomHeight","bottom_padding","fontUrl","url","data","index","control","ControllerContainer","InnerContainer","attrs","className","isFull","Container","isDark","InnerContent"],"mappings":"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","sourcesContent":["import _ from \"lodash\";\nimport Head from \"next/head\";\nimport React from \"react\";\nimport shortid from \"shortid\";\nimport styled, { css } from \"styled-components\";\nimport { createBreakpoint } from \"react-use\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef, useState } from \"react\";\n\nimport Content from \"../components/Content\";\nimport Controller from \"../components/Controller\";\nimport Video from \"../components/Video\";\nimport input from \"../input1.json\";\nimport { darkModeAtom, durationAtom, frameHeightAtom, mobileModeAtom, withVideoAtom } from \"../atom\";\n\nconst ControllerLine = ({ content }) => {\n    const [duration] = useAtom(durationAtom);\n\n    const startTimes = _.map(content, \"end_time\");\n    if (!duration) {\n        return (\n            <Loading key={shortid.generate()}>\n                <p>loading...</p>\n            </Loading>\n        );\n    }\n\n    return (\n        <Line>\n            {startTimes.map((time) => {\n                return (\n                    <LinePoint value={(time / duration) * 100} key={shortid.generate()}>\n                        <Circle />\n                    </LinePoint>\n                );\n            })}\n        </Line>\n    );\n};\nconst Loading = styled.div`\n    > p {\n        color: white;\n    }\n\n    z-index: 200;\n    background-color: black;\n    position: fixed;\n    min-width: 100%;\n    min-height: 100%;\n    display: ${(props) => (props.isLoading ? \"flex\" : \"none\")};\n    flex: 1;\n    align-items: center;\n    justify-content: center;\n`;\n\nconst Circle = styled.div`\n    width: 10px;\n    height: 10px;\n    position: absolute;\n    left: 100%;\n    z-index: 999;\n    \n    background-color: gray;\n`;\nconst LinePoint = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    margin-top: 5px;\n    width: ${(props) => props.value}%;\n    height: 10px;\n`;\nconst Line = styled.div`\n    margin-top: 5px;\n    pointer-events: none;\n    display: flex;\n    width: 100%;\n    height: 20px;\n    position: absolute;\n    z-index: 200;\n    overflow: hidden;\n    top: 0;\n    > div:last-child {\n        visibility: hidden;\n    }\n`;\n\nconst modeSelector = ({ mobile, dark }) => {\n    if (mobile === false && dark === false) {\n        return \"original\";\n    }\n\n    if (mobile === false && dark === true) {\n        return \"original_dark\";\n    }\n\n    if (mobile === true && dark === false) {\n        return \"restructure\";\n    }\n\n    if (mobile === true && dark === true) {\n        return \"restructure_dark\";\n    }\n};\nconst imageSelector = ({ location, dark }) => {\n    if ((location === \"top\") & (dark === false)) {\n        return \"top_img\";\n    }\n    if ((location === \"top\") & (dark === true)) {\n        return \"top_img_dark\";\n    }\n\n    if ((location === \"bottom\") & (dark === false)) {\n        return \"bottom_img\";\n    }\n    if ((location === \"bottom\") & (dark === true)) {\n        return \"bottom_img_dark\";\n    }\n};\n\nconst Main = () => {\n    const [dark] = useAtom(darkModeAtom);\n    const [mobile] = useAtom(mobileModeAtom);\n    const [height, setHeight] = useAtom(frameHeightAtom);\n    const [content, setContent] = useState(input.content.original);\n    useEffect(() => {\n        reset();\n        setContent(input.content[modeSelector({ mobile, dark })]);\n    }, [dark, mobile]);\n    useEffect(() => {\n        setHeight(input.template.height);\n    }, []);\n    const [duration] = useAtom(durationAtom);\n\n    const [key, setKey] = useState(shortid.generate());\n    const reset = () => {\n        setKey(() => shortid.generate());\n        videoComponentRef.current.move();\n    };\n\n    const [withVideo] = useAtom(withVideoAtom);\n    const videoComponentRef = useRef();\n    const togglePlay = () => {\n        videoComponentRef.current.toggle();\n    };\n\n    const jump = (percentPoint) => {\n        videoComponentRef.current.jump(percentPoint);\n    };\n    const videoSource = input.sourcePath + input.video.source;\n\n    const frameInfo = {\n        sourcePath: input.sourcePath,\n        topBg: input.template[imageSelector({ location: \"top\", dark })],\n        bottomBg: input.template[imageSelector({ location: \"bottom\", dark })],\n        topHeight: (input.template.top_padding / input.template.height) * 100,\n        bottomHeight: (input.template.bottom_padding / input.template.height) * 100,\n    };\n    return (\n        <>\n            <Head>\n                <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n                <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin />\n                {input.template.fontUrl.map((url) => {\n                    return <link href={url} rel=\"stylesheet\" />;\n                })}\n                <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n                <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\" />\n                <meta name=\"viewport\" content=\"viewport-fit=cover, user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1\" />\n            </Head>\n            <Container className=\"node\">\n                <Loading isLoading={!duration}>\n                    <p>loading..</p>\n                </Loading>\n                <InnerContainer isFull={!withVideo}>\n                    <InnerContent key={key}>\n                        {content.map((data, index) => {\n                            return <Content key={index} data={data} index={index} sourcePath={input.sourcePath} frameInfo={frameInfo} isFull={!withVideo} template={input.template} />;\n                        })}\n                    </InnerContent>\n                    <Video src={videoSource} content={content} ref={videoComponentRef} videoLocation={input.video.control} />\n                </InnerContainer>\n                <ControllerContainer>\n                    <Controller reset={reset} togglePlay={togglePlay} jump={jump} />\n                    <ControllerLine content={content} />\n                </ControllerContainer>\n            </Container>\n        </>\n    );\n};\nconst ControllerContainer = styled.div`\n    width: 100%;\n    position: relative;\n    background-color: black;\n`;\nconst InnerContainer = styled.div.attrs({ className: \"frame\" })`\n    flex: 1;\n    display: flex;\n    align-items: stretch;\n    padding-right: 100px;\n    position: relative;\n    ${(props) =>\n        props.isFull &&\n        css`\n            padding-right: 0;\n        `};\n`;\nconst Container = styled.div`\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    max-height: 100vh;\n    width: 100vw;\n    max-width: 100vw;\n    overflow: hidden;\n    box-sizing: border-box;\n    align-items: stretch;\n    position: relative;\n    background-color: ${(props) => (props.isDark ? \"rgb(47, 48, 49)\" : \"white\")};\n    @supports (-webkit-touch-callout: none) {\n        height: -webkit-fill-available;\n    }\n`;\n\nconst InnerContent = styled.div`\n    flex: 1;\n    display: flex;\n    align-items: stretch;\n    padding-right: 100px;\n    position: relative;\n`;\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}